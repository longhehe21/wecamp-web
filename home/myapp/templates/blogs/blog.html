{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Blog - Wecamp" %}{% endblock %}

{% block extra_head %}
<script src="https://unpkg.com/htmx.org@1.9.10"></script>
{% endblock %}

{% block content %}

  <!-- Page Title -->
  <div class="page-title dark-background" data-aos="fade">
    <style>
        .page-title { background-image: url('{% static "assets/img/travel/showcase-8.webp" %}'); }
    </style>
    <div class="container position-relative">
      <h1>{% trans "Blog" %}</h1>
      <p>{% trans "Khám phá những câu chuyện, kinh nghiệm và tin tức mới nhất từ Wecamp." %}</p>
      <nav class="breadcrumbs">
        <ol>
          <li><a href="{% url 'index' %}">{% trans "Trang Chủ" %}</a></li>
          <li class="current">{% trans "Blog" %}</li>
        </ol>
      </nav>
    </div>
  </div>

  <!-- Blog Hero Section -->
  {% if featured or headlines.exists %}
  <section id="blog-hero" class="blog-hero section">
    <div class="container" data-aos="fade-up" data-aos-delay="100">
      <div class="blog-grid">
        <!-- Featured + Headlines -->
        {% if featured %}
        <article class="blog-item main-feature" data-aos="fade-up">
          <img src="{{ featured.image.url }}" alt="{{ featured.title }}" class="img-fluid">
          <div class="blog-content">
            <div class="post-meta">
              <span class="date">{{ featured.published_at|date:"M. d, Y" }}</span>
              <span class="category">{{ featured.get_category_display }}</span>
            </div>
            <h2 class="post-title">
              <a href="{% url 'blog_details' featured.id %}" class="clamp-3-lines">{{ featured.title }}</a>
            </h2>
            <p class="post-excerpt">{{ featured.subtitle|default:"" }}</p>
          </div>
        </article>
        {% endif %}

        {% if headlines.exists %}
        <div class="secondary-features">
          {% for post in headlines %}
          <article class="blog-item" data-aos="fade-up" data-aos-delay="{% if forloop.counter == 1 %}100{% else %}200{% endif %}">
            <img src="{{ post.image.url }}" alt="{{ post.title }}" class="img-fluid">
            <div class="blog-content">
              <div class="post-meta">
                <span class="date">{{ post.published_at|date:"M. d, Y" }}</span>
                <span class="category">{{ post.get_category_display }}</span>
              </div>
              <h3 class="post-title">
                <a href="{% url 'blog_details' post.id %}" class="clamp-3-lines">{{ post.title }}</a>
              </h3>
            </div>
          </article>
          {% endfor %}
        </div>
        {% endif %}
      </div>
    </div>
  </section>
  {% endif %}

  <div class="section-header text-center mb-5" data-aos="fade-up" data-aos-delay="70">
    <h3>{% trans "Các Bài Viết Mới Nhất" %}</h3>
    <p>{% trans "Những câu chuyện mới nhất từ Wecamp" %}</p>
  </div>

  <!-- Bài viết thường + Pagination (AJAX) -->
  <section id="blog-posts" class="blog-posts section">
    <div class="container" data-aos="fade-up" data-aos-delay="150">
      {% include 'blogs/_regular_posts.html' %}
    </div>
  </section>

  <style>
.section-header {
  text-align: center;
  padding: 40px 30px 0 30px;
  position: relative;
  max-width: 800px;
  margin: 0 auto;
}

.section-header h3 {
  font-size: 2.2rem;
  font-weight: 700;
  color: #1a1a1a;
  margin: 0 0 16px 0;
  position: relative;
  display: inline-block;
  padding: 0 20px;
  line-height: 1.3;
}

.section-header h3::before,
.section-header h3::after {
  content: '';
  position: absolute;
  top: 50%;
  width: 60px;
  height: 2px;
  background: var(--accent-color);
  transform: translateY(-50%);
}

.section-header h3::before {
  left: -80px;
}

.section-header h3::after {
  right: -80px;
}

.section-header p {
  font-size: 1.1rem;
  color: #555;
  margin: 0;
  font-weight: 400;
  line-height: 1.6;
  max-width: 600px;
  margin: 0 auto;
}

/* Responsive */
@media (max-width: 768px) {
  .section-header {
    padding: 30px 15px 25px;
  }
  .section-header h3 {
    font-size: 1.8rem;
    padding: 0 15px;
  }
  .section-header h3::before,
  .section-header h3::after {
    width: 40px;
  }
  .section-header h3::before { left: -55px; }
  .section-header h3::after { right: -55px; }
  .section-header p {
    font-size: 1rem;
  }
}

@media (max-width: 480px) {
  .section-header h3::before,
  .section-header h3::after {
    display: none;
  }
}
</style>
{% endblock %}
