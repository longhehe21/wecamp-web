{% extends 'base.html' %}
{% load static %}
{% load price_filters %}
{% load i18n %}

{% block title %}{% trans "Nghỉ Dưỡng - Wecamp Cafe Retreat" %}{% endblock %}

{% block content %}
<!-- Page Title -->
<div class="page-title dark-background" data-aos="fade">
  <style>
    .page-title { background-image: url('{% static "assets/img/service/theme.jpg" %}'); }
  </style>
  <div class="container position-relative">
    <h1>{% trans "Nghỉ Dưỡng Tại Wecamp" %}</h1>
    <p>{% trans "Trải nghiệm cắm trại bên suối – gần gũi thiên nhiên, tiện nghi đầy đủ" %}</p>
    <nav class="breadcrumbs">
      <ol>
        <li><a href="{% url 'index' %}">{% trans "Trang Chủ" %}</a></li>
        <li class="current">{% trans "Nghỉ Dưỡng" %}</li>
      </ol>
    </nav>
  </div>
</div>

<!-- Service Content -->
<section class="service-content section">
  <div class="container">
    <div class="row align-items-center g-5 mb-5">
      <div class="col-lg-6" data-aos="fade-right">
        <img src="{% static 'assets/img/service/theme.jpg' %}" 
             style="min-height: 450px; max-height: 450px; object-fit: cover;" 
             alt="{% trans 'Lều tại Wecamp' %}" class="img-fluid rounded-4 shadow">
      </div>
      <div class="col-lg-6" data-aos="fade-left">
        <h2>{% trans "Cắm Trại Bên Suối – Đầy Đủ Tiện Nghi" %}</h2>
        <p class="lead">{% trans "Lều rộng rãi, view suối, điện, nước, wifi – phù hợp nghỉ dưỡng hoặc team building." %}</p>
        <ul class="list-unstyled">
          <li class="mb-3">
            <i class="bi bi-check-circle-fill text-success me-2"></i>
            <strong>{% trans "2 loại lều:" %}</strong> {% trans "Nghỉ đêm & Trong ngày" %}
          </li>
          <li class="mb-3">
            <i class="bi bi-check-circle-fill text-success me-2"></i>
            <strong>{% trans "Tiện ích:" %}</strong> {% trans "Điện, nước, wifi, BBQ" %}
          </li>
          <li class="mb-3">
            <i class="bi bi-check-circle-fill text-success me-2"></i>
            <strong>{% trans "Phục vụ:" %}</strong> {% trans "7:30 - 19:30" %}
          </li>
        </ul>
        <a href="#booking" class="btn btn-explore mt-3">
          <i class="bi bi-calendar-check"></i>
          <span>{% trans "Đặt Lều Ngay" %}</span>
        </a>
      </div>
    </div>

    {% include 'components/_combo_slider.html' %}
  </div>
</section>

<!-- LỀU -->
<section class="service-menu section bg-white">
  <div class="container">
    <div class="text-center mb-5" data-aos="fade-up">
      <h2>{% trans "Chọn Loại Lều" %}</h2>
      <p class="text-muted">{% trans "Phù hợp với nhu cầu nghỉ dưỡng của bạn" %}</p>
    </div>

    <div class="isotope-layout" data-default-filter="*" data-layout="masonry" data-sort="original-order">
      <ul class="gallery-filters isotope-filters text-center mb-5" data-aos="fade-up" data-aos-delay="100">
        <li data-filter="*" class="filter-active">{% trans "Tất cả" %}</li>
        {% for type_code, type_name in TENT_TYPE %}
          <li data-filter=".filter-{{ type_code }}">{{ type_name }}</li>
        {% endfor %}
      </ul>

      <div class="row gallery-grid isotope-container" data-aos="fade-up" data-aos-delay="200">
        {% for tent in tents %}
        <div class="col-lg-4 col-md-6 gallery-item isotope-item filter-{{ tent.tent_type }}">
          <div class="menu-item-card h-100 border rounded-4 overflow-hidden shadow-sm">
            {% if tent.image %}
              <img src="{{ tent.image.url }}" class="w-100" style="height: 450px; object-fit: cover;" alt="{{ tent.name }}">
            {% else %}
              <img src="{% static 'assets/img/service/tent-default.webp' %}" class="w-100" style="height: 450px; object-fit: cover;" alt="{% trans 'Lều' %}">
            {% endif %}
            <div class="p-4">
              <h5 class="fw-bold">{{ tent.name }}</h5>
              <p class="text-muted small">{{ tent.description|truncatewords:12 }}</p>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <span class="h5 text-primary mb-0">{{ tent.price|format_price }}</span>
                  <small class="text-muted d-block">/ {{ tent.get_tent_type_display }}</small>
                </div>
                <a href="#booking" class="btn btn-explore btn-sm">
                  <i class="bi bi-cart"></i> {% trans "Đặt" %}
                </a>
              </div>
            </div>
          </div>
        </div>
        {% empty %}
        <div class="col-12 text-center">
          <p class="text-muted">{% trans "Chưa có lều nào." %}</p>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<!-- Booking Form -->
<section id="booking" class="service-booking section bg-light">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="booking-card p-5 rounded-4 shadow-lg" data-aos="zoom-in">
          <h3 class="text-center mb-4">{% trans "Gửi Thông Tin Đặt Lều" %}</h3>
          
          {% if messages %}
            {% for message in messages %}
              <div class="alert alert-{{ message.tags }} text-center">{{ message }}</div>
            {% endfor %}
          {% endif %}

          <form method="post">
            {% csrf_token %}
            <input type="hidden" name="service" value="tent">
            <div class="row g-3">
              <div class="col-md-6">
                <input type="text" name="name" class="form-control" placeholder="{% trans 'Họ & Tên' %}" required>
              </div>
              <div class="col-md-6">
                <input type="tel" name="phone" class="form-control" placeholder="{% trans 'Số điện thoại' %}" required>
              </div>
              <div class="col-md-6">
                <input type="date" name="date" class="form-control" required>
              </div>
              <div class="col-md-6">
                <input type="time" name="time" class="form-control" required>
              </div>
              <div class="col-12">
                <textarea name="note" class="form-control" rows="3" placeholder="{% trans 'Ghi chú (số người, món đặc biệt...)' %}"></textarea>
              </div>
              <div class="col-12 text-center">
                <button type="submit" class="btn btn-success btn-lg px-5">{% trans "Gửi Yêu Cầu" %}</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}
