{% load static %}
{% load i18n %}
<!-- templates/blogs/_regular_posts.html -->

<div id="regular-posts-container">
  <!-- Danh sách bài viết thường -->
  <div class="row gy-4">
    {% for post in regular_posts %}
    <div class="col-lg-4">
      {% include 'blogs/_post_card.html' %}
    </div>
    {% empty %}
    <div class="col-12 text-center">
      <p class="text-muted">{% trans "Chưa có bài viết nào." %}</p>
    </div>
    {% endfor %}
  </div>
    
  <!-- PHÂN TRANG (AJAX) -->
  {% if regular_posts.has_other_pages %}
  <div class="d-flex justify-content-center mt-5">
    <ul class="pagination">
      {% if regular_posts.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{ regular_posts.previous_page_number }}"
           hx-get="?page={{ regular_posts.previous_page_number }}"
           hx-target="#regular-posts-container"
           hx-swap="outerHTML"
           hx-push-url="true"
           title="{% trans 'Trang trước' %}">
          <i class="bi bi-chevron-left"></i>
        </a>
      </li>
      {% else %}
      <li class="page-item disabled"><a class="page-link" title="{% trans 'Trang trước' %}"><i class="bi bi-chevron-left"></i></a></li>
      {% endif %}

      {% for num in regular_posts.paginator.page_range %}
        {% if regular_posts.number == num %}
        <li class="page-item active"><a class="page-link" href="#">{{ num }}</a></li>
        {% elif num > regular_posts.number|add:'-2' and num < regular_posts.number|add:'2' %}
        <li class="page-item">
          <a class="page-link" href="?page={{ num }}"
             hx-get="?page={{ num }}"
             hx-target="#regular-posts-container"
             hx-swap="outerHTML"
             hx-push-url="true"
             title="{% blocktrans %}Trang {{ num }}{% endblocktrans %}">
            {{ num }}
          </a>
        </li>
        {% endif %}
      {% endfor %}

      {% if regular_posts.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ regular_posts.next_page_number }}"
           hx-get="?page={{ regular_posts.next_page_number }}"
           hx-target="#regular-posts-container"
           hx-swap="outerHTML"
           hx-push-url="true"
           title="{% trans 'Trang sau' %}">
          <i class="bi bi-chevron-right"></i>
        </a>
      </li>
      {% else %}
      <li class="page-item disabled"><a class="page-link" title="{% trans 'Trang sau' %}"><i class="bi bi-chevron-right"></i></a></li>
      {% endif %}
    </ul>
  </div>
  {% endif %}
</div>
